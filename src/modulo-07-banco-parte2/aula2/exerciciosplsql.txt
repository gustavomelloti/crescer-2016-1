DECLARE 
  VNOMECLIENTE VARCHAR2(255);
  VNOMECIDADE VARCHAR2(255);
  VDATAPRIMEIROPEDIDO DATE;
  VDATAULTIMOPEDIDO DATE;
  VVALORTOTALPEDIDOS NUMERIC(10, 2);
  
  BEGIN
    SELECT  CLIENTE.NOME, CIDADE.NOME, MIN(PEDIDO.DATAPEDIDO), MAX(PEDIDO.DATAPEDIDO), SUM(PEDIDO.VALORPEDIDO)
    INTO VNOMECLIENTE, VNOMECIDADE, VDATAPRIMEIROPEDIDO, VDATAULTIMOPEDIDO, VVALORTOTALPEDIDOS
    FROM CLIENTE
    LEFT JOIN CIDADE ON CIDADE.IDCIDADE = CLIENTE.IDCIDADE
    INNER JOIN PEDIDO ON PEDIDO.IDCLIENTE = CLIENTE.IDCLIENTE
    WHERE CLIENTE.IDCLIENTE = &IDCLIENTE
    GROUP BY CLIENTE.NOME, CIDADE.NOME;
    
    DBMS_OUTPUT.PUT_LINE('Nome: ' || VNOMECLIENTE);
    DBMS_OUTPUT.PUT_LINE('Cidade: ' || VNOMECIDADE);
    DBMS_OUTPUT.PUT_LINE('Data primeiro pedido: ' || VDATAPRIMEIROPEDIDO);
    DBMS_OUTPUT.PUT_LINE('Data último pedido: ' || VDATAULTIMOPEDIDO);
    DBMS_OUTPUT.PUT_LINE('Valor total dos pedidos: ' || VVALORTOTALPEDIDOS);
END;