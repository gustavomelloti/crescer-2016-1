DECLARE 
CURSOR C_APOSTA IS
    SELECT AP.APOSTA, COUNT(*) QUANTIDADEACERTOS
    FROM ARQUIVO_APOSTA_A AP
    INNER JOIN CONCURSONUMEROSORTEADO ON CONCURSONUMEROSORTEADO.IDCONCURSO = AP.CONCURSO AND CONCURSONUMEROSORTEADO.NUMERO IN (AP.N1, AP.N2, AP.N3, AP.N4, AP.N5, AP.N6, AP.N7, AP.N8, AP.N9, AP.N10, AP.N11,AP.N12, AP.N13, AP.N14, AP.N15)
    GROUP BY (AP.APOSTA)
    HAVING COUNT(*) > 3;
BEGIN
  FOR CUR IN C_APOSTA LOOP
    INSERT INTO GANHADOR(ID,IDAPOSTA, QUANTIDADEACERTOS, VALORPREMIO) VALUES (SQGANHADOR.NEXTVAL,CUR.APOSTA, CUR.QUANTIDADEACERTOS, 0);
  END LOOP;
END;